import"./chunks/FooterMoblie.1d98417e.js";import{C as r}from"./chunks/permission.623ab746.js";let c=class{option=document.getElementById("swiperOption");theDirection=this.option.getAttribute("data-di");theSpeed=this.option.getAttribute("data-sp");deviceOrientation=0;timer=0;imgWidth=260;sptime=10;spsubtime=2;constructor(){window.addEventListener("resize",()=>{this.autoScrollStart()});let e=document.getElementById("swiper"),t=null,s=this;e.onscroll=function(){clearInterval(s.timer),clearTimeout(t),t=setTimeout(function(){s.autoScrollStart()},500)}}clickLeft(){this.theDirection="left"}clickRight(){this.theDirection="right"}autoScrollCheck(){this.deviceOrientation=0;let e=document.documentElement.clientWidth||document.body.clientWidth||window.screen.width,t=document.documentElement.clientHeight||document.body.clientHeight||window.screen.height;e>t&&(console.log("==swiper=deviceOrientation:",1),this.deviceOrientation=1)}getFontSize(){let e=750;var t=window.screen.width;return t>e&&(t=e),t<320&&(t=320),t*2/(e/100)}autoScrollV(){let e=document.getElementsByClassName("imgDiv"),t=document.getElementsByClassName("imgBox")[0];e.length<40&&(t.innerHTML+=t.innerHTML),console.log("==Swiper=autoScrollV=imgDiv:",e.length);let s=e[0].clientHeight;t.style.height="unset",t.style.height=e.length*s+"px",t.style.left=0,t.style.top=0,t.style.width="100%";let i=this,l=this.sptime,o=()=>{t.offsetTop<-(t.offsetHeight/2)&&(t.style.top=0),t.offsetTop>0&&(t.style.top=-(t.offsetHeight/2)+"px");let n=0,h=document.getElementById("swiper").clientHeight,d=t.offsetTop,m=()=>{n<h?(n+=2,n=n>h?h:n,i.theDirection=="left"?i.theSpeed=-Math.abs(n):i.theSpeed=Math.abs(n),t.style.top=d+i.theSpeed+"px"):(clearInterval(this.timer),this.timer=setInterval(o,l*1e3))};clearInterval(this.timer),this.timer=setInterval(m,this.spsubtime)};this.timer=setInterval(o,l*1e3)}autoScrollH(){let e=document.getElementsByClassName("imgBox")[0],t=document.getElementsByClassName("imgDiv");t.length<40&&(e.innerHTML+=e.innerHTML),this.imgWidth=t[0].clientWidth;let s=document.getElementById("swiper"),i=s.clientWidth;console.log(s.clientWidth+"==Swiper=swiperClientWidth:"+i),e.style.width=t.length*this.imgWidth+"px";let l=this;e.style.left=0,e.style.top=0,e.style.height="100%";let o=this.sptime,n=()=>{e.offsetLeft<-(e.offsetWidth/2)&&(e.style.left=0),e.offsetLeft>0&&(e.style.left=-(e.offsetWidth/2)+"px");let a=0,h=e.offsetLeft,d=()=>{a<i?(a+=2,a=a>i?i:a,l.theDirection=="left"?l.theSpeed=-Math.abs(a):l.theSpeed=Math.abs(a),e.style.left=h+l.theSpeed+"px"):(clearInterval(this.timer),this.timer=setInterval(n,o*1e3))};clearInterval(this.timer),this.timer=setInterval(d,this.spsubtime)};this.timer=setInterval(n,o*1e3)}autoScrollStart(){clearInterval(this.timer),this.autoScrollCheck(),this.deviceOrientation==1?this.autoScrollV():this.autoScrollH()}autoScrollStop(){clearInterval(this.timer)}};const g=new c;let p=class{gameFrame=document.getElementById("gameFrame");startBox=document.getElementById("startBox");gameBox=document.getElementById("gameBox");gInfoEle=document.getElementById("gInfoEle");deviceOrientation=0;tryAdTimes=0;gameBoxInfo={hw:750,hh:1334,vw:983,vh:557,url:this.gInfoEle.getAttribute("data-url"),orientation:this.gInfoEle.getAttribute("data-orientation"),gid:this.gInfoEle.getAttribute("data-gid")};constructor(){this.init()}init(){r.gAdpBreak({preloadAdBreaks:"auto"}),window.playGame=()=>{this.playGame()},window.goBack=()=>{this.goBack()},r.initNavBar(),this.resetPlayGameSize(),window.addEventListener("resize",this.resetPlayGameSize.bind(this))}cycleInit(){let e=document.getElementById("cycle"),t=e.children[2],s=document.querySelectorAll("img.icon"),i=0,l=setInterval(()=>{i+=9,i>=100&&(i=100),t.innerHTML=i+"%",i==100&&(clearInterval(l),e.style.display="none",s[0].style.display="block",s[1].style.display="block")},200)}goBack(){g.autoScrollStop(),this.gameBox.style.display="none",this.startBox.style.display="block",document.getElementById("footer").style.display="block"}showAdpBreak(){if(this.tryAdTimes>2)return;let e=this;r.gAdpBreak({type:"preroll",name:"app_start",adBreakDone:t=>{console.log("====dbg===mPreAd=breakStatus",t.breakStatus),t.breakStatus==="notReady"&&setTimeout(()=>{e.tryAdTimes++,e.showAdpBreak()},1e3)}})}playGame(){}resetPlayGameSize(){this.deviceOrientation=0,r.deviceOrientation()&&(this.deviceOrientation=1),this.gameBox.style.display!=""&&this.gameBox.style.display!="none"&&(this.gameBox.style.display=this.deviceOrientation?"flex":"block");let e=164,t=r.clientWidth(),s=r.clientHeight(),i=t,l=s;t>s&&(i=s,l=t);let o=l-i*e/this.gameBoxInfo.hw,n=this.gameBoxInfo.hh*i/this.gameBoxInfo.hw;o>n&&(o=n);let a=this.gameBoxInfo.hw*o/this.gameBoxInfo.hh;if(t>s){let h=a;a=o,o=h}r.setCssProperty("--game_box_h",s+"px"),r.setCssProperty("--game_box_con_w",a+"px"),r.setCssProperty("--game_box_con_h",o+"px")}addPlayHistory(){r.mAxios({url:"/user/addPlayHistory",data:{gid:this.gameBoxInfo.gid},success:e=>{},fail:e=>{console.log(e)}})}replayGame(){this.gameFrame.setAttribute("src",this.gameBoxInfo.url)}initFloatLeft(e){if(!e)return;var t={deviation:{x:null,y:null}};let s=l=>{var o=l.targetTouches[0];t.deviation.y=o.pageY-e.offsetTop},i=l=>{if(l.targetTouches.length!=1)return;l.stopPropagation(),l.preventDefault();let o=l.targetTouches[0],n=o.pageY-t.deviation.y<0?0:o.pageY-t.deviation.y,a=window.innerHeight;0<n&&(n=o.pageY-t.deviation.y>a-this.offsetHeight?a-e.offsetHeight:o.pageY-t.deviation.y),e.style.left="0px",e.style.top=n+"px"};e.addEventListener("touchstart",s),e.addEventListener("touchmove",i)}};new p;
